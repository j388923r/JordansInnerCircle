<html>
    <head>
        <title>Simple As Love</title>
        <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
        
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        
        <style>
        
            body {
                padding-left:2%;
                background-color:salmon;
            }
            
            h1 {
                margin: 0px;
                padding-right: 2%;
                font-family: "Comic Sans MS", cursive, sans-serif;
                display: inline-block;
            }
            
            .navigationbar {
            
            }
            
            ul.header {
                display: inline;
                padding: 0px;
                margin: 0px;
            }
            
            h1 a:hover {
                text-decoration: none;
            }
            
            .header li {
                font: 20pt bold "Pacifico";
                width:12%;
                padding: 1%;
                margin: 1%;
                display:inline-block;
                background-color: #E5D058;
                text-align: center;
                border-radius: 5px;
            }
            
            #boardBackground {
                border-radius: 10px;
                width: 96%;
                height: 90%;
                background-color: rgba(167, 167, 167, 0.99);
                display: inline-block;
            }
            
            #ideaBoard {
                border-radius: 10px;
                margin:2%;
                margin-left: 3%;
                width: 45%;
                height: 93%;
                background-color: rgba(255, 255, 255, 1.0);
                float: left;
                z-index: 10;
            }
            
            #decisionBoard {
                border-radius: 10px;
                margin:2%;
                margin-left: 52%;
                width: 45%;
                height: 93%;
                background-color: rgba(255, 255, 255, 1.0);
                z-index: 10;
            }
            
            #decisionHeader, #ideaHeader {
                position: absolute;
                margin-top: -20px;
                height: 40px;
                width: 10%;
                border-radius: 5px;
                background-color: #EEEEEE;
                text-align: center;
                z-index: 11;
            }
            
            #ideaHeader {
                margin-left: 15.5%;
            }
            
            #decisionHeader {
                margin-left: 15.5%;
            }
            
            #filterPopover {
                position: absolute;
                background-color: lightblue;
                border-radius: 5px;
                padding: 5px;
            }
            
            #categories {
                list-style-type: none;
                padding-left: 1em
            }
            #cost {
                list-style-type: none;
                padding-left: 1em
            }
            #tags {
                list-style-type: none;
                padding-left: 1em
            }

            #addIdeaButton {
                position: relative;
                left: 39%;
                top: 5%;
            }
        </style>
        
        <script>
            var isAllChecked = false;
            var checked_arr = [];
            $(document).ready(function(){
                var ideaBoard = document.getElementById('ideaBoard');
                var decisionBoard = document.getElementById('decisionBoard');
                var first =  document.getElementById('lessThan500');
                var second = document.getElementById('500To2000');
                var third = document.getElementById('2000To5000');
                var fourth = document.getElementById('moreThan5000');
                first.addEventListener("change", checkboxChange);
                second.addEventListener("change", checkboxChange);
                third.addEventListener("change", checkboxChange);
                fourth.addEventListener("change", checkboxChange);
                buildFilter(["Clothing","Entertainment","Flowers","Venue"], ["cool", "vegas", "prince"]); //change to names
                $('[data-toggle="popover"]').popover({
                    placement : 'bottom',
                    content : '<input type="text" placeholder="Filter term"/>'
                });
                $('#filters').click(function() {
                    var categories = document.getElementById("filterPopover");
                    categories.hidden = !categories.hidden;
                    buildFilter(["Clothing","Entertainment","Flowers","Venue"], ["cool", "vegas", "prince"]); //change to names
                });

                $('#btnCheckAll').click(function() {
                    isAllChecked = true;
                    checkAll();
                });

                $('#btnUncheckAll').click(function() {
                    uncheckAll();
                    isAllChecked = false;
                });

            });
            //function that takes in categories and tags list and contructs the filter 
            //do we want to do cost filtering dynamically or have set intervals

            var buildFilter = function(cat_arr, tag_arr) {
                cat_arr.sort();
                tag_arr.sort();
                $("#categories").html("");
                $("#tags").html("");
                for (var i = 0; i < cat_arr.length; i++) {
                    var cat = cat_arr[i];
                    var newCat = document.createElement("input");
                    newCat.type = "checkbox";
                    newCat.name = cat;
                    newCat.id = cat;
                    newCat.onchange = checkboxChange;
                    
                    newCat.checked = isAllChecked;

                    for(var j = 0; j < checked_arr.length; j++){
                        if(checked_arr[j] == cat){
                            newCat.checked = true;
                        }
                    }

                    var newList = document.createElement("li");

                    $(newList).append(newCat);
                    $(newList).append("  " + cat);
                    // var newString = "<li><input type=\"checkbox\" name="+ cat+" />  " + cat+ "</li>"; //might need to change to allow addition of event listeners
                    $("#categories").append(newList);
                };
                for (var i = 0; i < tag_arr.length; i++) {
                    var tag = tag_arr[i];
                    var newTag = document.createElement("input");
                    newTag.type = "checkbox";
                    newTag.name = tag;
                    newTag.id = tag;
                    
                    newTag.checked = isAllChecked;
                    newTag.onchange = checkboxChange;

                    for(var j = 0; j < checked_arr.length; j++){
                        if(checked_arr[j] == tag){
                            newTag.checked = true;
                        }
                    }

                    var newList = document.createElement("li");

                    $(newList).append(newTag);
                    $(newList).append("  " + tag);
                    // var newString = "<li><input type=\"checkbox\" name="+ tag+" />  " + tag+ "</li>";
                    $("#tags").append(newList);
                };
            }

            var checkAll = function() {
                var boxes = document.getElementsByTagName('input');
                for(var i = 0; i< boxes.length; i++){
                    if(boxes[i].type == 'checkbox') {
                        boxes[i].checked = true;
                    }
                }
            }

            var uncheckAll = function() {
                var boxes = document.getElementsByTagName('input');
                for(var i = 0; i< boxes.length; i++){
                    if(boxes[i].type == 'checkbox') {
                        boxes[i].checked = false;
                        checked_arr = []
                    }
                }
            }

            var checkboxChange = function() {
                if(this.checked){
                    console.log(this.name);
                    checked_arr.push(this.name);
                }
                else{
                    console.log("remove filter")
                    for(var i = 0; i < checked_arr.length; i++){
                        if(checked_arr[i]== this.name){
                            checked_arr.splice(i,1);
                        }
                    }
                }
            }
            var listUnion = function(list1, list2) {
                var retList = list1;
                for(var i = 0; i < list2.length; i++){
                    var inRetList = false;
                    for(var j = 0; j < retList.length; j++){
                        if(list2[i] == retList[j]){
                            inRetList = true;
                        }
                    }
                    if(!inRetList){
                        inRetList.push(list2[i]);
                    }
                }
                return retList;
            }

            var listInter = function(list1, list2) {
                var retList = []
                for(var i = 0; i < list1.length; i++){
                    var matched = false;
                    for(var j = 0; j < list2.length; j++){
                        if(list1[i] == list2[j]){
                            matched = true;
                        }
                    }
                    if(matched){
                        retList.push(list1[i]);
                    }
                }
                return retList;
            }

        </script>
    </head>
    <body>
        <div class="navigationbar">
            <h1><a ref="/">Simple as Love</a></h1>
            <ul class="header">
                <li>Main Page</li>
                <li>Ideas</li>
                <li>Decisions</li>
                <li>Budget</li>
                <li>Deleted <br> Archive</li>
            </ul>
        </div>
        <div>
            <button id="filters" style="margin-bottom: 5px" class="btn">Filters <span class="glyphicon glyphicon-menu-down"></span></button>
            <div id="filterPopover">
                <input type="text" placeholder="Search term"/><br>
                <h4>Categories:</h4>
                <ul id="categories">
                    <!-- <li><input type="checkbox" name="Clothing" /> Clothing </li>
                    <li><input type="checkbox" name="Entertainment" /> Entertainment </li>
                    <li><input type="checkbox" name="Flowers" /> Flowers </li>
                    <li><input type="checkbox" name="Venue" /> Venue </li> -->
                </ul>
                <h4>Cost:</h4>
                <!--do we want this to dynamically change -->
                <ul id="cost">
                    <li><input type="checkbox" name="lessThan500" id="lessThan500" />  less than $500 </li>
                    <li><input type="checkbox" name="500To2000" id="500To2000" />  $500 to $2000 </li>
                    <li><input type="checkbox" name="2000To5000" id="2000To5000" />  $2001 to $5000 </li>
                    <li><input type="checkbox" name="moreThan5000" id="moreThan5000" />  greater than $5000 </li>
                </ul>
                <h4>Tags:</h4>
                <ul id="tags">

                </ul>

                <input id="btnCheckAll" type="button" name="checkAll" value="Check All"/>
                <input id="btnUncheckAll" type="button" name="uncheckAll" value="Uncheck All"/>

            </div>
        </div>
        <div id="boardBackground">
            <div id='ideaBoard'>
                <div id="ideaHeader">
                    Ideas
                </div>
                <button id="addIdeaButton" class="btn">Add New Idea</button>
            </div>
            <div id='decisionBoard'>
                <div id="decisionheader">
                    Decisions
                </div>
            </div>
        </div>
    </body>
</html>